<!DOCTYPE html>
<!-- saved from url=(0053)https://www.cnblogs.com/lhrbest/articles/5414373.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="referrer" content="origin">
    <title>用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园</title>
<meta property="og:description" content="第一章用好HugePage，告别Linux性能故障 DBAplus社群 | 2016-04-14 20:31 1概述 Oracle发展这么多年，提供了多种的内存管理方式，从最早SGA、PGA手工管理，">
    <link type="text/css" rel="stylesheet" href="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/bundle-CodingLife.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/bundle-CodingLife-mobile.css">
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/lhrbest/rss">
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/lhrbest/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/lhrbest/wlwmanifest.xml">
    <script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/amp4ads-host-v0.js.下载"></script><script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/pubads_impl_rendering_2019041801.js.下载"></script><script async="" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/analytics.js.下载"></script><script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/jquery-2.2.0.min.js.下载"></script>
    <script>var currentBlogId=190245;var currentBlogApp='lhrbest',cb_enable_mathjax=true;var isLogined=false;</script>
    <script type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
        tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processClass: 'math', processEscapes: true },
        TeX: { 
            equationNumbers: { autoNumber: ['AMS'], useLabelIds: true }, 
            extensions: ['extpfeil.js'],
            Macros: {bm: "\\boldsymbol"}
        },
        'HTML-CSS': { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
        });
    </script><script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/MathJax.js.下载"></script>
<script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/blog-common.js.下载" type="text/javascript"></script>
<link rel="preload" href="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/f.txt" as="script"><script type="text/javascript" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/f.txt"></script><script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/pubads_impl_2019041801.js.下载" async=""></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="prefetch" href="https://tpc.googlesyndication.com/safeframe/1-0-32/html/container.html"></head>
<body><div id="MathJax_Message" style="display: none;"></div>
<a name="top"></a>

<!--PageBeginHtml Block Begin-->
<script>
window.tctipConfig = {
staticPrefix: "http://static.tctip.com",
cssPrefix: "http://static.tctip.com",
buttonImageId: 5,
buttonTip: "dashang",
list:{
alipay: {qrimg: "https://files.cnblogs.com/files/lhrbest/zhifubao_lhrbest.bmp"},
weixin:{qrimg: "https://files.cnblogs.com/files/lhrbest/weixin_lhrbest.bmp"},
}
};
</script>
<script src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/tctip.min.js.下载"></script>
<!--PageBeginHtml Block End-->

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="https://www.cnblogs.com/lhrbest/"><img id="blogLogo" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/lhrbest/">^_^小麦苗^_^</a></h1>
<h2>小麦苗出品，实用经典，简单易懂，接地气！-----技术应用型博客，主打实用性，只讲实用的，不讲没用的，多做实验，多思考！</h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/lhrbest/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%5E_%5E%E5%B0%8F%E9%BA%A6%E8%8B%97%5E_%5E">联系</a></li>
<li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/lhrbest/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/lhrbest/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 157&nbsp; </span>
<span id="stats_article_count">文章 - 73&nbsp; </span>
<span id="stats-comment_count">评论 - 52</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
        <div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/lhrbest/articles/5414373.html">用好HugePage，告别Linux性能故障</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h1 style="margin: 0pt; line-height: 36pt; text-indent: -21.6pt; mso-pagination: widow-orphan; mso-line-height-alt: 12pt; mso-list: l0 level1 lfo1" align="center"><span style="font-family: ; mso-font-kerning: 22.0000pt"><span style="mso-list: ignore"><font face="宋体"><font style="font-size: 10.5pt"><font style="font-weight: bold">第一章</font><span><font style="font-weight: bold">&nbsp;</font></span></font></font></span></span><span style="font-family: ; mso-font-kerning: 22.0000pt; mso-spacerun: &#39;yes&#39;; mso-fareast-font-family: 宋体"><font style="font-size: 10.5pt"><font face="Times New Roman"><font style="font-weight: bold">用好</font><font style="font-weight: bold">HugePage</font></font><font style="face: 宋体"><font style="font-weight: bold">，告别</font></font><font style="face: &quot;Times" new="new" roman?="Roman?"><font style="font-weight: bold">Linux</font></font></font><font style="face: 宋体"><font style="font-size: 10.5pt"><font style="font-weight: bold">性能故障</font></font></font></span><span style="font-family: ; mso-font-kerning: 22.0000pt; mso-spacerun: &#39;yes&#39;; mso-fareast-font-family: 宋体"></span></h1>  <p class="MsoNormal" style="padding-bottom: 0pt; padding-top: 0pt; padding-left: 0pt; margin: 0pt; padding-right: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; color: ; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font face="宋体"><font style="font-size: 9pt" color="#9b9b9b">DBAplus社群 | 2016-04-14 20:31</font></font></span><span style="font-family: ; color: ; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;; mso-fareast-font-family: 宋体"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">1概述</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle发展这么多年，提供了多种的内存管理方式，从最早SGA、PGA手工管理，到9I版本出现的PGA的自动管理，到10G版本出现的SGA自动管理（ASMM)，再到11G版本出现的memory自动管理（AMM)，Oracle基本是在朝着智能化、傻瓜化、自动化的方向稳步前进着，对于初学Oracle的DBA来说，看到这些不同的内存管理方式一定心里有着不同程度的疑惑，例如：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle有这么多内存分配的管理方式，我该使用哪一种？是使用11G版本推出的AMM管理方式，还是使用10G版本出现的ASMM管理方式？或者干脆使用最旧的手工方式管理内存？</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">我该为我的实例SGA，PGA分别设置多大呢?</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">我该为buffer cache，shared pool分配多大的内存空间？</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">什么情况下我该使用大页？为什么大页这个词最近几年这么容易听到？</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">有没有一些简单粗暴的算法来搞定这一切？</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">写这篇文章的初衷也来源于上面这些非常正常的疑问，如果这篇文章能给有这些疑惑的DBA朋友一些指导和帮助，那肉丝我也就真的功莫大焉了。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">2Memory构成</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>在一个运行着Oracle数据库的专用服务器上，内存基本上被以下内容所占用：</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Kernel Memory</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">OS Page Table</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">文件系统Cache</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">SGA</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">PGA</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle进程</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">其他进程（RMAN，非Oracle的进程等等）</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205259304-266326335.png"><img title="wps86F5.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps86F5.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205300179-1137787625.png" width="1802" height="452"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">严格来说OS Page Table也算是Kernel Memory部分的内容，由于本文后面会重点讲大页的内容，因此把OS Page Table这部分在图中独立了出来，以引起读者注意。必须要强调，Oracle不应该使用掉主机上的所有内存，过量的内存分配会诱发操作系统SWAP的产生，导致Oracle性能严重降低，在RAC环境下，内存不足还非常容易导致RAC节点的驱逐。对于Oracle两大块内存：SGA和PGA，DBA一定要仔细根据系统特点、业务使用特点做好规划和设计，以防出现OS内存不够用的情况。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">3内存自动化发展历程</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">我们首先了解一下Oracle内存发展的历程，基本上Oracle的内存管理在版本的演进过程中沿着越来越智能化、自动化、傻瓜化的方向前进。接触过MYSQL等数据库的DBA朋友应该比较清楚，这些数据库基本上都还需要DBA去决定每个内存组件的大小，而Oracle已经从9I版本开始就迈向智能化、自动化的过程了。下图是Oracle内存管理的一个演进图：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205301491-994141514.jpg"><img title="wps8705.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8705.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205301976-569179425.jpg" width="800" height="554"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">4PGA 自动管理</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle是多进程的架构，这点区别于MYSQL，MYSQL是单进程多线程的架构，Oracle会为每一个用户连接创建一个独立的操作系统进程来为用户提供服务，这个进程叫做服务器进程或者影子进程，它像是用户的一个代理，来操作数据文件或者SGA内存，由于服务器进程的代码是Oracle公司开发的，所以Oracle公司完全相信这些进程或代码是安全的，因此这些进程可以直接操作数据文件和SGA内存，这些进程接受用户进程发送的指令，并完成相关的操作，并根据需要来给用户进程返回结果。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">由于服务器进程是操作系统上的一个进程，因此它本身需要占用一些操作系统内存，除此之外，进程在对数据进行读取、排序、hash过程中，也会占用一定量的内存，在Oracle 9I版本之前，对于服务器进程的内存管理是由一些参数去控制的，以下参数代表每一个服务器进程可以使用的不同区域的内存大小（都是进程的私有内存区域）：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">SORT_AREA_SIZE</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HASH_AREA_SIZE</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">BITMAP_MERGE_AREA_SIZE</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">CREATE_BITMAP_AREA_SIZE</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">例如，SORT_AREA_SIZE控制了每一个进程可用的排序区大小，HASH_AREA_SIZE参数控制了每一个进程可用的hash区大小，这些参数都有默认值，但是默认值是否合适，需要打上一个大大的问号，因为不同的任务对于PGA内存的不同区域有不同的要求，例如，如果是做排序操作，就对排序区内存要求较大，而对hash区没任何的要求。当然如果默认值不合适，DBA可以手工调整这些区域的大小。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle 9I版本出现了PGA的自动管理，不再需要像9I之前版本需要设置一系列参数来控制PGA的使用，只需要设置PGA_AGGREGATE_TARGET为一个值，就可以控制所有的服务器进程的PGA使用量，至于每个服务器进程使用了多少排序区，hash区，都交给Oracle去控制。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>一般情况下对于PGA的大量使用有如下几种操作：</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">hash 对于hash join操作，hash桶所占用的内存就在进程的私有PGA内存中，而不是在共享内存SGA中，如果使用PGA手工管理的话，可以通过HASH_AREA_SIZE参数来动态调整会话进行hash操作能够使用的内存量。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">sort 对于排序操作，例如查询语句里的order by、创建索引的排序操作等占用的内存也在PGA中，如果使用PGA手工管理，可以通过SORT_AREA_SIZE参数动态调整会话排序操作可以使用的内存量。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">parallel 并行操作简直可以说是PGA内存的杀手，每一个并行进程都能使用到最多2G的PGA内存，当然Oracle会确保所有的并行slave使用的PGA内存不能超过PGA_AGGREGATE_TARGET的一半。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">现在Oracle的版本已经出到了12C，PGA的自动管理已经发展了很多个年头，如果是个人，也应该是一个非常成熟的小伙子了，甚至是位大叔了，绝大部分数据库操作完全没必要再去手工调整PGA的一些参数。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">不过，我们依然能从互联网上、论坛上看到有很多DBA对这种手工调整PGA的技术崇拜有加（我以前也是），确实在一些情况下，通过手工调整PGA的相关内存区，可以达到加速排序等一些操作的目的，但是如果需要操作的数据量非常的大，那这种调整往往是费时费力，甚至是徒劳的，因为对于一个进程的私有PGA内存来说，像sort,hash等P区域的内存分配是有限制的，现在11GR2的版本对于每个进程的PGA内存最大限制默认是2个G，且排序区可以使用的只有1个G，如果你的排序等操作需要的内存远远不止1，2个G，那么这种优化就非常的徒劳，甚至还可能变慢（肉丝亲身遭遇过变慢的案例）。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">是否使用PGA自动管理由参数WORKAREA_SIZE_POLICY控制，它的值可以为auto和manual，顾名思义，auto为PGA自动管理，manual为PGA手工管理，回到9I之前的使用方式。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这里肉丝提供几个大家可能会感兴趣的隐含参数，比如我上面提到了每个进程最大能使用的PGA不能超过2个G，通过修改隐含参数可以突破这个限制。&gt;肉丝在这里警戒各位，这些参数如果要在生产环境使用，请在你的数据库版本下做好测试（包括相同的OS及版本）。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">以下为11GR2版本的情况，其他版本并未做测试：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">_PGA_MAX_SIZE 每个进程的PGA的最大内存大小。默认值为：2147483648，2个G，单位为B。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">_SMM_MAX_SIZE 每个进程的工作区的大小，默认值为1/2 _PGA_MAX_SIZE，1048576 ，单位KB，1GB，排序区、hash区都属于工作区的范围。64位系统下真实使用的排序区内存不能超过4GB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">_SMM_PX_MAX_SIZE 所有并行查询的SLAVE进程能够用到的PGA总量。默认值为 1/2 pga_aggregate_target，单位为KB，RAC环境下，每个节点都可以用到这么多内存。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">以上全部为动态参数，可以在session/system级别来在线修改。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205302460-471956105.png"><img title="wps8706.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8706.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205302851-1254903210.png" width="427" height="119"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">上面的参数调整后，一定要设置对应的pga_aggregate_target，否则以上调整可能会不起作用，建议设置为修改后的_SMM_PX_MAX_SIZE的值的两倍。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">默认情况下，每个进程使用的排序区不能超过1G。由参数_SMM_MAX_SIZE（单位KB）控制，默认为_PGA_MAX_SIZE（单位B）的一半。例如，并行度20创建索引，总共可以使用的排序区大小为20*1G=20G，但是同时还受参数_SMM_PX_MAX_SIZE的控制，所有的slave占用的内存不能超过_SMM_PX_MAX_SIZE的值（单位为KB），默认为pga_aggregate_target的一半。同时64位系统下，每个进程可以使用的排序空间不能超过4个G。所以即使把_SMM_MAX_SIZE调整大于4个G也没有用。_SMM_PX_MAX_SIZE，所有并行查询的SLAVE进程能够用到的PGA总量。每个RAC 节点都可以用到这么多，限制的是本节点所有并行slave能够消耗的PGA。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>如何为PGA_AGGREGATE_TARGET设置一个合理的值？</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">PGA_AGGREGATE_TARGET的设定经常是一个摸索的过程，这里给出官方的一个分配指导原则</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205303460-220016023.png"><img title="wps8717.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8717.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205303835-1616112710.png" width="608" height="75"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">上面公式中的TOTAL_MEM * 80%代表着Oracle可以使用的所有内存为操作系统的80%，再根据不同类型业务的特点，OLTP系统，可以在此基础上分配20%的内存给PGA，DSS分析型系统，可以给出剩余内存的50%。这个只是一个指导的意见，具体情况要具体分析。例如，你的OLTP系统上有成千上万个连接，那么你可以粗略的按照每个进程占用10M的内存来大体的计算一下PGA需要占用的内存空间，再者，假如你的系统不但连接数非常多，而且活跃的连接数也非常的多，那么你可以按照每个进程至少12M的内存来进行估算，更为重要的，系统中假如存在非常多的临时性的计算任务，那么要为PGA预留的内存就更多了。 例如，并行度设置为5创建索引，每个并行进程占用的PGA内存接近1个G：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205304304-1492567289.png"><img title="wps8718.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8718.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205304866-840566075.png" width="660" height="367"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205305382-255870954.png"><img title="wps8719.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8719.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205305991-114323520.png" width="499" height="391"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">所以你在为系统规划PGA内存时不要忘了这些临时性任务需要占用的内存。他们可能是很大的一块哦。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">该为数据库分配多少的PGA内存，除了把连接数的多少这个指标作为一个考量因素外，还需要关注活跃连接数的多少，这是因为很多系统连接数虽然非常的多，但是去数据库里一统计发现，绝大部分的连接已经几个小时甚至几天都没活跃过了，这往往是应用程序的连接池不加以管理的结果（也可能是其他原因）。对于不活跃的连接，Oracle每个进程的PGA占用不会太大，按照10M计算是个合理安全的值。AIX下可以大一些，按照每个15M-20M计算。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这里再提供一种估算每个空闲的服务器进程占用OS内存的方法。 首先通过操作系统命令free -m查看一下当前OS剩余的内存，69590M</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205306663-1120759106.png"><img title="wps872A.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps872A.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205306976-1346348944.png" width="534" height="275"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205307382-183691797.png"><img title="wps872B.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps872B.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205307788-999489612.png" width="494" height="329"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205308179-133417610.png"><img title="wps872C.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps872C.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205308554-1742869672.png" width="508" height="360"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">再次查看剩余的操作系统内存，通过没创建连接之前的剩余内存减去创建完2000个连接之后的剩余内存可以估算出每个进程占用的内存大约为（59332-44548）/ 2000=7M</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205309023-1946032089.png"><img title="wps873C.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps873C.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205309398-361088932.png" width="529" height="199"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">读者需要牢记，减少的7M内存中，绝大部分都是进程本身占用的，只有1-2M的内存是PGA占用的。因此上面给大家推荐的值是10-12M，也就是给进程预留出一些PGA的内存来。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">确认一个空闲进程占用的真正PGA内存有多大，可以通过v$process视图中PGA_ALLOC_MEM字段来获得，如下：只有1.49M。但是就像上面已经提到的，这个进程从操作系统层面看却占用了7M左右的内存。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205309913-1866755820.png"><img title="wps873D.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps873D.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205310320-1344449028.png" width="616" height="184"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">pga_aggregate_target参数指定的值并不是一个硬限制，直到Oracle 12C才提供了一个参数来强制限制PGA的使用量。如果读者不知道该为自己系统的PGA设置一个什么样的值，可以通过视图v$pgastat中的maximumPGAallocated,totalPGAallocated值作为参考，前者代表自实例启动以来最大的PGA使用峰值，后者代表当前PGA的使用量，不过这个视图最大的缺点是不能看到各个时间段的PGA总体使用情况，这里肉丝给大家提供一个更好的视图来作为参考vsysmetric_history</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205310913-1594132593.png"><img title="wps874E.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps874E.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205311663-1079697813.png" width="541" height="624"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">上面查询的输出代表了各个时间段的，PGA内存的使用量，结果集并没有完全列出来，读者可以根据PGA各个时间段的使用量来更加精准的去为自己系统的PGA如何做设定做决策。设定PGA的过程是一个循序渐进的过程。再次强调，一个进程占用的内存除了PGA之外，进程本身也会占用内存，这点上面我们已经讨论过。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">按照Oracle 2015年OOW上的一份PPT提到，12C之前版本，PGA最多可用的内存可达到PGA_AGGREGATE_TARGET设定值的三倍，这里你听一下就行了，不必当真。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果生产环境真的遭遇了PGA严重使用过量的情况，可以通过Event 10261 来限制某个/所有进程PGA的使用，level后面值的单位为KB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205312398-1109554323.png"><img title="wps874F.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps874F.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205312835-1613394943.png" width="573" height="41"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">一旦进程超出PGA的设定配额，会被后台进程杀掉并报错，不同的版本可能报错的信息不一样：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">For 11.2.0.4 and 12.1.0.1+, ORA-10260</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">For 11.1 - 11.2.0.3, ORA-600 [723]</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>12C PGA_AGGREGATE_LIMIT</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">12C之前的版本对于PGA的使用限制并没有一个硬限制，这个可能会导致一些问题，比如不加以限制后可能会导致OS SWAP的问题，一旦出现SWAP会导致Oracle性能的急剧下降，甚至导致DOWN机，我曾经遭遇过的一个案例是出现SWAP后，LGWR进程本身的内存出现了SWAP，数据库系统的表现是几乎完全HANG死，最后没办法只能重启解决问题。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">对于这个新特性的使用是通过参数PGA_AGGREGATE_LIMIT来限制PGA的使用上线，它是一个推导参数，在使用ASMM情况下，取以下的最大值</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">2GB</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">200% PGA_AGGREGATE_TARGET</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">3MB* PROCESSES</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">在使用AMM情况下，肉丝还未找到PGA_AGGREGATE_LIMIT取值的规律，如果你知道，请告诉我哦。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">5MSMM</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">10G前SGA的管理是通过手工设置一系列的参数来实现的，例如重要的参数有以下几个：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">buffer_cache_size</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">shared_pool_size</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">large_pool_size</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">stream_pool_size</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">log_buffer</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">SGA是一大块内存的统称，由上面列出的组件组成，10G之前的版本,DBA需要对SGA的各个内存区域进行手工设置，这可能对一个DBA无形中要求变得非常的高，需要了解业务，了解热点数据量，了解SQL的使用方式，是否存在大量不同文本的SQL等等来决策来给每个区域分配多少内存。使用过这个版本的DBA基本都遭遇过一个经典的报错：ORA-04031，一般是由于shared pool内存不够导致，这个不够的原因可能有很多，共享池内存的严重碎片化，大量的硬解析，巨大的PL/SQL文本等等都可能会导致这个问题。下面我们来看下，手工管理SGA情况下，如何考虑为buffer cache和shared pool这两个最重要的内存组件分配内存。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>Buffer Cache</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Buffer Cache俗称数据块高速缓存，是用来缓存数据块的拷贝的，Oracle通过改进后的LRU算法以期待这些数据块后续被高效的重用。服务器进程从磁盘读入的数据就放在这块内存中，修改数据时，也是在这个区域对数据进行修改。并没有一个给buffer cache分配内存的黄金法则，还是要根据操作系统的内存大小，业务的热点数据量、业务的类型等因素来决定给buffer cache分配多大的内存大小。我们先看下如何决定整个SGA的大小，对于SGA的分配原则，官方建议如下：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205313351-270730190.png"><img title="wps8750.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8750.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205313898-921220880.png" width="442" height="78"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">上面的公式格式跟PGA的公式大同小异，刨去20%内存给操作系统之后，分为了不同的系统类型，基本上是OLTP系统，大部分的内存给buffer cache，DSS类的系统，buffer cache没那么重要，可以给到50%甚至更低。 至于SGA中多少可以分配给buffer_cache，要看实际情况。DBA可以通过查看buffer cache的命中率来粗略了解是否给buffer cache分配了足够的内存。但是熟悉我的朋友都知道，我是OWI方法论的践行者，对于命中率的崇拜在Oracle里已然不应该再存在，但是命中率作为一种性能诊断的辅助手段依然具有它的价值。如果系统的SQL都足够优化后，命中率不高，一定程度上意味着可能buffer cache给小了或者你的业务访问的数据非常的离散，热点数量太少。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这里肉丝给出的优化思路是自顶向下，命中率低是一个表象，最上层的应用是不是调用了大量不需要调用的SQL，这些SQL是不是缺少索引，SQL都足够优化后，DBA是不是考虑加大buffer cache来提升性能，加大之后还是不行，是不是要考虑增加系统内存来进一步提高buffer cache的大小，最后是不是需要为数据库多加几个盘或者使用SSD来提高性能。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">采用自顶向下的分析方法有利于真正发现问题所在而且以最低的代价解决问题，如果仅仅是一个SQL由于缺少索引而导致整个数据库系统缓慢，DBA直接就去加盘扩容IO，那么最终会发现花费了这么大的代价，治标不治本，问题依然没有解决。上面给出的公式并不适用于所有情况，特别是OLTP系统，如果进程数非常的多，那么需要进一步降低SGA占用内存的比例，以预留出更多内存给PGA使用。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>Shared Pool</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Oracle占用量最大的两块内存除了buffer cache区就是Shared Pool的内存了，它的结构非常的复杂，而且由于要缓存SQL代码这种非标准大小的文本，经常会产生大量的碎片化内存，shared pool总体上包含了两大部分，一块是library cache区，用来缓存SQL、PL/SQL代码，保存它们的执行计划，提高SQL的解析效率，如果你的应用代码从来不使用绑定变量，那么这一块的内存对你来说是一个很大的负担，但是Oracle里是无法关闭library cache区的，因此对于OLTP系统，请确保SQL都使用了绑定变量。第二大块区域是row cache区，用来缓存数据库的数据字典，由于保存在里面的信息是以行的形式存在，因此叫row cache。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">对于这一块的内存，依据数据库中元信息（metadata）的多少而决定，如果数据库中有几十万的对象，那么这一块的内存就会占用比较大，同时表上的很多列都有直方图信息，也会导致这一区的内存占用比较大。在一个稳定的系统中，这一区域的内存基本上是静态的，Oracle中几乎没有操作会频繁修改row cache区。有个例外情况是没有cache属性的sequence，如果这种sequence调用频繁，就会触发频繁的修改sequence的属性值，进而可能会产生row cache lock的一些等待，优化的办法是为每一个sequence设置足够的cache值。 &gt;如果应用程序没有使用绑定变量，而且难以修改，可以通过设置cursor_sharing为force来尝试解决问题。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这里肉丝再讲一个亲身经历的案例，老DBA嘛，可能技能已经不多，但故事还是有的，曾经帮一位客户解决了一个free buffer waits的案例，这个等待事件的出现一般说明buffer cache过小，或者全表扫描、写入操作比较多、写脏数据比较慢，从AWR报告看，free buffer waits排在TOP EVENT的第一名,占用的DB TIME已达到了百分之七八十，而且从awr报告中发现客户的shared pool内存占用已经达到了接近50G，而分析数据库一个月之前的AWR报告，shared pool的内存只有3个G左右的大小，基本上可以认定为shared pool内存占用过大，而导致buffer cache不够用，进而出现了free buffer waits等待事件，经过跟客户沟通后知道，以前一直比较稳定，最近做过的大的变更是给数据库使用了oracle 的flahcache，通过MOS上搜索flashcache关键字最终发现，在11.2.0.4，Oracle RAC如果使用了flash cache，那么会在shared pool 中分配额外的内存存放GCS资源。多出的内存为：208 bytes * the total number of (flash) buffer blocks。因为这里提醒广大DBA朋友，如果你打算使用Oracle的FlashCache那么请为它预留出足够的shared pool内存。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">7ASMM</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">10G 版本Oracle推出了ASMM，自动SGA管理，它的出现一定程度上帮助DBA解决了管理SGA的问题，通过设置参数sga_target为非0值来启用ASMM。但是在10GR1,包括10GR2的早期版本，ASMM还不够成熟存在比较多的BUG，导致了比较多的问题，所以当时DBA在一些核心的生产环境，还是沿用了9I时候的手工SGA管理。自动SGA管理，不再需要为每个内存组件设定值，当然如果你设置sga_target的同时，设置了db_cache_size这些参数，那么db_cache_size这些参数值会作为最小值要求。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果sga_target设置为0，memory_target也为0，则回归到传统的MSMM管理。通过使用ASMM可以很大程度上解决上面提到的ORA-04031的错误。在使用了ASMM后，去查看spfile文件，会发现多了一些双下划线打头的内存参数如__db_cache_size，这些内存参数是Oracle实例运行过程中动态产生固化到spfile中的，如果实例运行的时间足够长，这些参数的值被固话后，相当于有了一个基于自身环境的最佳实践参数，数据库实例重启后，会沿用固化在spfile中的这些参数值。 &gt; 11G版本即使sga_target设置为0，memory_target也设置为0，也可能会发现SGA的pool之间Granule的移动，这是11G的新Linux特性，通过参数_memory_imm_mode_without_autosga来控制。 &gt;</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>Granule</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">ASMM技术的实现，内部是通过Granule在内存组件之间移动来实现。这里对Granule做一点解释，Oracle 10G引入的自动共享内存管理，目的是为了解决下面的问题，“我应该把db_cache_size设置为多大?我应该把shared_pool_size设置多大？那么10G以后，Oracle给出的答案是，“你不用再考虑这个问题了，我通过算法帮你搞定“。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">简单来说，就是通过比较通过增加数据块缓存减少的磁盘IO时间与通过增加共享池优化而节省的时间，通过比对，来得出是否需要在两者间来移动内存。为了让内存在db_cache_size和shared_pool_size之间高效移动，Oracle在9I版本中重新构建了SGA，也就是使用固定大小的内存块-Granule，Granule会随着操作系统、Oracle版本以及SGA大小的不同而不同，读者可以通过如下的SQL语句来查看当前实例的Granule的大小：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205314382-209727095.png"><img title="wps8751.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8751.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205315179-1863222913.png" width="464" height="234"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">in Oracle Database 11.2.0.2 indicates that the granule size increases from 64MB to 128MB when the SGA_TARGET parameter is set to 1 byte greater than 32G, and jumps to 256MB when the SGA_TARGET parameter is set to 1 byte greater than 64G. A granule size of 32MB is possible when the SGA_TARGET was set to a value between 8G + 1 byte to 16G.</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">8AMM</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">有了PGA的自动管理，SGA的自动管理，Oracle 这个强迫症患者终于在11G这个版本推出了AMM，自动内存管理，由于使用了AMM后就不能使用大页，因此这个功能其实一直没被广泛使用，通过这个功能DBA只需要设置memory_target一个参数就可以完成整个数据库实例内存的配置，就像ASMM导致了一些双下划线隐含参数的产生，AMM同样导致了一些双下划线隐含参数的产生，例如：__pga_aggregate_target，__sga_target。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">而且在11.2.0.2版本之前，DBCA建库默认就是AMM管理（有些时候Oracle胆子真的是很大），11.2.0.3以后开始DBCA建库时会检测操作系统内存大小，大于4G内存默认为ASMM，小于4G内存默认为AMM。同样如果你设置AMM后，也设置了SGA_TARGET等参数，那么这些参数会作为最小值要求。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">AMM最大的问题是不能使用大页内存。关于使用大页的重要性会在本文后面部分详细介绍。 &gt;Doc 749851.1 &gt; &gt; Doc 1453227.1.</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">11G后由于出现了AMM，如果你做DBA时间足够长，你一定遇到过下面这个错误</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205315648-1006120572.png"><img title="wps8752.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8752.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205316007-1854904067.png" width="513" height="41"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这个错误给人莫名其妙的感觉，“MEMORY_TARGET特性不被支持”，其实不是特性不被支持，这是由于AMM使用的是操作系统的共享内存文件系统，位于/dev/shm下，如果配置的内存文件系统比较小，小于了memory_target的值就会报错，一般在Linux主流的操作系统上，这个内存共享文件系统的值是内存大小的一半，如果读者遭遇了这个问题，要不去调小memory_target的参数值，要不通过如下办法去修改这个共享内存文件系统的大小：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205316476-761273703.png"><img title="wps8763.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8763.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205316929-1013929731.png" width="554" height="240"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这里指出一点，11G ASM默认会使用AMM，官方强烈建议不要修改这个默认行为。ASM里要求MEMORY_TARGET的最小值为256M。如果设置了低于256M的值，Oracle会自动增加内存到256M。 对于ASM的发布版：11.2.0.3/11.2.0.4/12.1，Oracle强烈建议把memory_target设置为1536M，这个值被证明在绝大部分的环境里都是足够的。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">使用了ASM后，数据库实例的shared_pool内存需要重新评估计算，如下公式是在正常shared pool的基础上需要额外增加的大小：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205317445-604416156.png"><img title="wps8764.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8764.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205317913-1054643353.png" width="565" height="286"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果ASM磁盘组是external redundancy,需要在2MB基础上，每100G的空间，增加1MB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果ASM磁盘组是normal redundancy,需要在4MB基础上，每50G的空间，增加1MB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果ASM磁盘组是high redundancy,需要在6MB基础上，每33G的空间，增加1MB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">ASM &amp; Shared Pool (ORA-4031) (文档 ID 437924.1)</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">9大页</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">对于类Linux系统，CPU必须把虚拟地址转换程物理内存地址才能真正访问内存。为了提高这个转换效率，CPU会缓存最近的虚拟内存地址和物理内存地址的映射关系，并保存在一个由CPU维护的映射表中，为了尽量提高内存的访问速度，需要在映射表中保存尽量多的映射关系。这个映射表在Linux中每个进程都要持有一份，如果映射表太大，就会大大降低CPU的TLB命中率，主流的Linux操作系统，默认页的大小是4K，对于大内存来说，这会产生非常多的page table entries，上面已经提到，Linux下页表不是共享的，每个进程都有自己的页表，现在随便一个主机的内存都配置的是几十个G，几百个G，甚至上T，如果在上面跑Oracle不使用大页，基本上是找死，因为Oracle是多进程架构的，每一个连接都是一个独占的进程，大内存+多进程+不使用大页=灾难，肉丝在8年的DBA生涯里，至少帮助不下5个客户处理过由于没有使用大页而导致的系统故障，而这5个客户都是近三四年遇到的，为什么大页这个词提前个三五年并没有被频繁提起，而当下，大页这个词在各种技术大会，最佳实践中成为热门词汇？</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这是因为最近几年是Linux系统被大量普及应用的几年，也是大内存遍地开花的几年，而且现在一个数据库系统动不动就是几百上千个连接，这些都促成了大页被越来越多的被关注到。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>大页的好处</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">我们来看一下使用了大页的好处：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">少的page table entries,减少页表内存</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">pin住SGA，没有page out</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">提高TLB命中率，减少内核cpu消耗</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">在没有使用大页的系统上，经常可能会发现几十上百G的页表，严重情况下，系统CPU的sys部分的消耗非常大，这些都是没使用大页的情况下的一些症状。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>大页的特点/缺点</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">要预先分配</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">不够灵活，甚至需要重启主机</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">如果分配过多，会造成浪费，不能被其他程序使用。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>大页的分配方法</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">通过在文件/etc/sysctl.cnf中增加vm.nr_hugepages参数来为大页设定一个合理的值，值的单位为2MB。或者通过echo 一个值到/proc/sys/vm/nr_hugepages中也可以临时性的对大页进行设定。 至于应该为大页设定多大的值，这个要根据系统SGA的配置来定，一般建议大页的总占用量大于系统上所有SGA总和+2GB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages on Oracle Linux 64-bit (文档 ID 361468.1),AIX页表共享，一般不用设置大页。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>大页的原理</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205318585-1415678821.png"><img title="wps8774.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8774.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205319663-601876389.png" width="1330" height="640"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">以下的内容是基于32位的系统，4K的内存页大小做出的计算： 1）目录表，用来存放页表的位置，共包含1024个目录entry，每个目录entry指向一个页表位置，每个目录entry，4b大小，目录表共4b*1024=4K大小 2）页表，用来存放物理地址页的起始地址，每个页表entry也是4b大小，每个页表共1024个页表entry，因此一个页表的大小也是4K，共1024个页表，因此页表的最大大小是1024*4K=4M大小 3）每个页表entry指向的是4K的物理内存页，因此页表一共可以指向的物理内存大小为：1024（页表数）*1024（每个页表的entry数）*4K（一个页表entry代表的页大小）=4G 4）操作系统将虚拟地址映射为物理地址时，将虚拟地址的31-22这10位用于从目录表中索引到1024个页表中的一个，将虚拟地址的12-21这10位用于从页表中索引到1024个页表entry中的一个。从这个页表entry中获得物理内存页的起始地址，然后将虚拟地址的0-12位用作4KB内存页中的偏移量，那么物理内存页起始地址加上偏移量就是进出所需要访问的物理内存地址。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">由于32位操作系统不会出现4M的页表，因为一个进程不能使用到4GB的内存空间，有些空间被保留使用，比如用来做操作系统内核的内存。而且页表entry的创建出现在进程访问到一块内存的时候，而不是一开始就创建。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>页表内存计算</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">在32位系统下，一个进程访问1GB的内存，会产生1M的页表，如果是在64位系统，将会增大到2M。 很容易推算，如果一个SGA设置为60G，有1500个Oracle用户进程，64位Linux的系统上，最大的页表占用内存为：60*2*1500/1024=175G，是的，你没看错，是175G！但是实际情况看到的页表占用可能没有这么大，打个百分之四五十的折扣，这是因为只有服务器进程访问到SGA的特定区域后，进程才需要把这一块对应的页表项加入到自己的页表中。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">11.2.0.3版本</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">11.2.0.3版本之前，如果分配的大页数量不足，那么Oracle启动过程中不会使用大页，转而使用小页，但是在11.2.0.3版本后，Oracle在启动时同样会尝试使用大页，如果大页的数量不够，那么会把当前配置的大页使用完，不够的部分再从小页中去获取，这一行为实际上是通过Oracle的一个参数来控制USE_LARGE_PAGES，后面会对这个参数做详细解释。通过数据库实例的alert文件可以清楚的看到这一情况的发生：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205320663-981665072.png"><img title="wps8785.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8785.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205321523-27158993.png" width="584" height="646"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Total Shared Global Region in Large Pages = 1024 MB (85%)，代表只有85%的SGA被放在了大页中。RECOMMENDATION部分，建议你至少增加89个大页来让SGA完全放到大页中。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>USE_LARGE_PAGES</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">这个参数用来控制数据库实例启动时，对于大页内存的使用行为。有3个值在11.2.0.3版本之前，11.2.0.3版本多了一个值auto：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">true 默认值，尽可能使用大页，有可能有一些页在大页中，有一些在小页中，这种情况下通过操作系统命令ipcs -ma可能会看到内存分段（内存分段可能有多重情况都会导致，例如开启numa也可能会导致内存分段）</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">false 不使用大页</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">only 选项代表强制使用大页，否则无法启动</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">auto （11.2.0.3）在实例启动时，通过后台进程dism echo xxx &gt; /proc/sys/vm/nr_hugepages 来尽可能的使用大页</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">以下代码为在参数设置为auto情况下alert的输出：</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205322538-1776449353.png"><img title="wps8795.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8795.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205323273-1957360243.png" width="532" height="693"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">可以看到启动实例过程中，优先启动了DISM进程，通过这个进程来自动完成大页的配置。$Oracle_HOME/bin/oradism的权限也是root权限，因为如果是grid权限不能完成大页的配置echo xxx &gt; /proc/sys/vm/nr_hugepages。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>Transparent Hugepage</strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">从RedHat6, RedHat7, OL6, OL7 SLES11 和 UEK2 kernels开始transparent hugepage被默认开启，它允许大页做动态的分配，而不是系统启动后就分配好，根据Oracle MOS DOC：1557478.1，transparent hugepage导致了很多的问题，建议将其关闭 查看是否启用了transparent hugepage cat /sys/kernel/mm/transparent_hugepage/enabled [always] never []内的值是当前启用的值，上面的输出说明启用了transparent hugepage。 可以通过 /etc/grub.conf 文件来关闭transparent hugepage。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205323945-835493754.png"><img title="wps8796.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8796.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205324382-1782883596.png" width="522" height="196"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">通过增加关键字transparent_hugepage=never来讲transparent hugepage关闭。 也可以通过开机启动后，echo相应的值到对应的文件来动态关闭transparent hugepage。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205324945-2066923649.png"><img title="wps8797.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps8797.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205325695-1584430933.png" width="563" height="118"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">OS层面查看大页使用情况</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">cat /proc/meminfo</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Total: 43000</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Free: 29493</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Rsvd: 23550</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">Hugepagesize: 2048 kB</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Total为所分配的页面数目，和Hugepagesize相乘后得到所分配的内存大小。43000*2/1024大约为84GB。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Free为从来没有被使用过的Hugepages数目。即使Oracle sga已经分配了这部分内存，但是如果没有实际写入，那么看到的还是Free的。这是很容易误解的地方。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Rsvd为已经被分配预留但是还没有使用的page数目。在Oracle刚刚启动时，大部分内存应该都是Reserved并且Free的，随着Oracle SGA的使用，Reserved和Free都会不断的降低。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">HugePages_Free – HugePages_Rsvd 这部分是没有被使用到的内存，如果没有其他的Oracle instance，这部分内存也许永远都不会被使用到，也就是被浪费了。在该系统上有11.5GB的内存被浪费了。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">10最佳实践</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">对于Oracle来说，这是一个最佳实践泛滥的时代，所有的最佳实践其实都有特定的应用场景，而不是放之四海皆准，但是当今信息爆炸时代（数据库种类爆炸时代），很多DBA没有那么多的耐心去专注学习一门数据库，只是拿来主义从网上找出一些最佳实践来，不管三七二十一就用到自己的环境中（甚至是生产环境中），一定程度上来说，崇拜最佳实践是懒惰的结果。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span class="16" style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt"><strong>针对于Oracle的内存分配方式，肉丝给大家推荐在核心系统上： </strong></font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">1.使用手工的SGA管理，这种管理方式已经非常的成熟，但是这种方式对DBA要求较高，一定程度上需要了解业务特点。 </font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">2.如果第一种方法你感觉到比较难，那么使用ASMM，但是为buffer cache,shared pool设定最小值的方式，这种方式是我非常推荐的方式。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">至于AMM这种内存分配方式，由于不能使用大页，建议不要去用。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">具体到内存如何分配，针对是OLTP场景，还是OLAP场景，有着不同的内存分配原则，即使是OLTP场景，针对进程数的多少，并发数的多少，SQL语句的特点，都会导致产生不同的内存分配方法。作为DBA要掌握基本的Oracle内存使用原理，然后根据实际情况去根据业务自身特点分配内存。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">不管是OLTP系统或者OLAP系统，一般都建议至少为操作系统预留出20%的内存空间，这些内存空间用于kernal、page table以及一些其他的进程需要，例如rman备份，文件系统缓存。这个也是Oracle官方的建议。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">把这一部分的内存刨去后，针对OLTP系统，可以考虑先尝试预留出20%的内存给PGA使用，80%的内存给SGA使用。如果系统上进程数比较多，特别是同时活跃的进程数比较多，需要给PGA预留出更多的内存，可以按照每个进程12M的PGA占用进行计算。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">针对OLAP系统，刨去操作系统的预留内存后，可以考虑预留出50%的内存给PGA使用，50%的内存给SGA使用。毕竟在纯OLAP下，buffer cache其实不需要那么大的内存空间。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span><a href="http://images2015.cnblogs.com/blog/646850/201604/646850-20160420205326288-955645265.png"><img title="wps87A8.tmp" style="border-left-width: 0px; border-right-width: 0px; background-image: none; border-bottom-width: 0px; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border-top-width: 0px" border="0" alt="wps87A8.tmp" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/646850-20160420205326898-1024815428.png" width="608" height="192"></a></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">SGA、PGA分配好后，要考虑到是否需要为buffer cache、shared pool来手工设定一个值，就像上文已经提到过的，可以参考buffer cache 的命中率，Library Hit的命中率作为一个辅助参考.如果命中率较低，有可能是内存分配的不够合理。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">当然你还需要借助于像AWR报告这样的工具，根据SQL的执行计划等内容来进一步的做诊断，比如命中率低的原因可能不是分配的buffer cache小，而是存在大量的低效的全表扫描，进而导致命中率低，这样的话，需要优化的就是SQL，而不是继续加大buffer cache。再比如，如果你发现Library cache Hit比较低，可能并不是shared pool比较小，还可能是系统的SQL存在大量未使用绑定变量的情况，导致硬解析过重。</font></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 1.0000pt; mso-spacerun: &#39;yes&#39;"></span></p>  <p class="MsoNormal" style="margin: 13.5pt 0pt; line-height: 16.5pt; text-indent: 0pt; mso-pagination: widow-orphan" align="left"><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">优化经常是个系统工程，不能一蹴而就，特别像Oracle是一个很庞大的复杂系统，对于问题的出现，更是要仔细推敲，不能轻易的下结论。随着做DBA时间越来越长，你也会越来越懂TOM的一句话：It depends。</font></span></p>  <p class="p" style="word-wrap: break-word; font-family: ; white-space: normal; word-spacing: 0px; text-transform: none; color: ; padding-bottom: 0pt; padding-top: 0pt; padding-left: 0pt; widows: 1; margin: 12pt 0pt 3pt; letter-spacing: normal; line-height: 26px; padding-right: 0pt; background-color: rgb(255,255,255); text-indent: 200pt; -webkit-text-stroke-width: 0px" align="left"><span class="15" style="word-wrap: break-word"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word"><strong style="word-wrap: break-word"><font face="宋体"><font style="font-size: 12pt" color="#666666">About Me</font></font></strong></span></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word; color: "><font face="Calibri"><font style="font-size: 12pt" color="#666666">....................................................................................................................................................</font></font></span></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word; color: "><font face="Calibri"><font style="font-size: 12pt" color="#666666">本文来自于微信公众号转载文章，若有侵权，请联系小麦苗及时删除</font></font></span></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; color: "><font color="#666666"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word"><font face="Calibri"><font style="font-size: 12pt">ITPUB BLOG</font></font></span></span><font style="font-size: 12pt"><span style="word-wrap: break-word"><span style="word-wrap: break-word"><font face="宋体">：</font></span></span></font></font></span></span><span class="15" style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word; color: "><strong style="word-wrap: break-word"><font face="Times New Roman"><font style="font-size: 12pt" color="#808080">http://blog.itpub.net/26736162</font></font></strong></span></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; color: "><font color="#666666"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word"><font face="Calibri"><font style="font-size: 12pt">QQ</font></font></span></span><font face="宋体"><font style="font-size: 12pt"><span style="word-wrap: break-word"><span style="word-wrap: break-word">：</span><span style="word-wrap: break-word">642808185<span class="Apple-converted-space">&nbsp;</span></span><span style="word-wrap: break-word">若加</span><span style="word-wrap: break-word">QQ</span></span></font><span style="word-wrap: break-word"><span style="word-wrap: break-word"><font style="font-size: 12pt">请注明您所正在读的文章标题</font></span></span></font></font></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word; color: "><font face="Calibri"><font style="font-size: 12pt" color="#666666">【版权所有，文章允许转载，但须以链接方式注明源地址，否则追究法律责任】</font></font></span></span></span><span style="word-wrap: break-word"></span></p>  <p class="p" style="word-wrap: break-word; border-top: rgb(199,218,241) 0.25pt solid; font-family: ; border-right: rgb(199,218,241) 0.25pt solid; vertical-align: baseline; background: rgb(199,218,241); white-space: normal; word-spacing: 0px; border-bottom: rgb(199,218,241) 0.25pt solid; text-transform: none; color: ; padding-bottom: 2pt; padding-top: 2pt; padding-left: 4pt; border-left: rgb(199,218,241) 0.25pt solid; widows: 1; margin: 0pt; letter-spacing: normal; line-height: 26px; padding-right: 2pt; text-indent: 0pt; -webkit-text-stroke-width: 0px" align="left"><span style="word-wrap: break-word; background-image: none; background-repeat: repeat; background-attachment: scroll; background-position: 0% 0%"><span style="word-wrap: break-word; font-family: "><span style="word-wrap: break-word; color: "><font face="Calibri"><font style="font-size: 12pt" color="#666666">....................................................................................................................................................</font></font></span></span></span><span style="font-family: ; text-transform: none; color: ; letter-spacing: 0pt; mso-font-kerning: 0.0000pt; mso-spacerun: &#39;yes&#39;"><font style="font-size: 10.5pt">&nbsp;</font></span></p></div><div id="MySignature" style="display: block;"><table cellpadding="10" width="100%" border="2" class="MsoNormalTable" style="line-height: 1.6; border-collapse: collapse; color: #666667; font-family: courier new">
		<tbody style="color: #666667; font-family: courier new">
			<tr style="color: #666667; font-family: courier new">
				<td style="background: #c7daf1; padding-bottom: 2.85pt; padding-top: 2.85pt; padding-left: 5.65pt; padding-right: 2.85pt; color: #666667; font-family: courier new" valign="middle" width="100%">
									<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 0pt; color: #666667; font-family: courier new">
						<span style="line-height: 1.6; font-family: courier new; color: #666667; font-size: 11pt">............................................................................................</span> 
					</p>
					<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 5pt; color: #666667; font-family: courier new">
						<span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt">● <span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt; background-color: #FFE500">小麦苗的微店</span>：<a style="font-family: courier new; line-height: 1.6; color: #0000FA; font-size: 11pt" href="https://weidian.com/s/793741433?wfr=c&amp;ifr=shopdetail" target="_blank">https://weidian.com/s/793741433?wfr=c&amp;ifr=shopdetail</a></span> 
					</p>
					<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 5pt; color: #666667; font-family: courier new">
						<span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt">● <span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt; background-color: #FFE500">小麦苗出版的数据库类丛书</span>：<a style="font-family: courier new; line-height: 1.6; color: #0000FA; font-size: 11pt" href="http://blog.itpub.net/26736162/viewspace-2142121/" target="_blank">http://blog.itpub.net/26736162/viewspace-2142121/</a></span> 
					</p>
					<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 5pt; color: #666667; font-family: courier new">
						<span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt">● <span style="font-family: courier new; line-height: 1.6; color: #666667; font-size: 11pt; background-color: #FFE500">小麦苗OCP、OCM、高可用网络班</span>：<a style="font-family: courier new; line-height: 1.6; color: #0000FA; font-size: 11pt" href="http://blog.itpub.net/26736162/viewspace-2148098/" target="_blank">http://blog.itpub.net/26736162/viewspace-2148098/</a></span> 
					</p>
					<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 0pt">
						<span style="line-height: 1.6; font-family: courier new; color: #666667; font-size: 11pt">............................................................................................</span> 
					</p>
					<p class="MsoNormal" style="margin: 0pt; line-height: 1.6; text-indent: 5pt; font-family: Courier New; color: #666667; font-size: 11pt">
						使用<strong><span style="color: #CC33E5; font-size: 11pt">微信客户端</span></strong>扫描下面的二维码来关注小麦苗的微信公众号（<a style="font-size: 11pt; color: #0000FA" href="http://mp.weixin.qq.com/s?__biz=MzIzOTA2NjEzNQ==&amp;mid=307287619&amp;idx=1&amp;sn=9149fab6ae1aecfd1288316c5edc3805&amp;scene=19#wechat_redirect" target="_blank">xiaomaimiaolhr</a>），<span style="font-family: Courier New; color: #666667">学习最实用的数据库技术。</span> 
					</p>
					<p class="MsoNormal" style="font-family: Courier New; color: #666667; margin: 0pt; line-height: 1.6; text-indent: 5pt" align="justify">
						<img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/26736162_1467812292IsyS.jpg" width="200px" height="200px" title="小麦苗的微信公众号" alt="小麦苗的微信公众号" style="width: 200px; height: 200px">
					</p>
				</td>
			</tr>
		</tbody>
	</table></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(5414373,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;3e95319f-7700-e411-8d02-90b11c0b17d6&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/lhrbest/" target="_blank"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/20150603110021.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/lhrbest/">^_^小麦苗^_^</a><br>
            <a href="http://home.cnblogs.com/u/lhrbest/followees">关注 - 44</a><br>
            <a href="http://home.cnblogs.com/u/lhrbest/followers">粉丝 - 105</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;3e95319f-7700-e411-8d02-90b11c0b17d6&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(5414373,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">0</span>
    </div>
    <div class="buryit" onclick="votePost(5414373,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="https://www.cnblogs.com/lhrbest/articles/5410146.html" class="p_n_p_prefix">« </a> 上一篇：<a href="https://www.cnblogs.com/lhrbest/articles/5410146.html" title="发布于2016-04-19 21:12">【BBED】 SYSTEM文件头损坏的恢复(4)</a><br><a href="https://www.cnblogs.com/lhrbest/articles/5414428.html" class="p_n_p_prefix">» </a> 下一篇：<a href="https://www.cnblogs.com/lhrbest/articles/5414428.html" title="发布于2016-04-20 21:01">细致入微 | 让 SQL 优化再多飞一会儿</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2016-04-20 20:54</span> <a href="https://www.cnblogs.com/lhrbest/">^_^小麦苗^_^</a> 阅读(<span id="post_view_count">4317</span>) 评论(<span id="post_comment_count">0</span>) &nbsp;<a href="https://i.cnblogs.com/EditArticles.aspx?postid=5414373" rel="nofollow">编辑</a> <a href="https://www.cnblogs.com/lhrbest/articles/5414373.html#" onclick="AddToWz(5414373);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=190245,cb_entryId=5414373,cb_blogApp=currentBlogApp,cb_blogUserGuid='3e95319f-7700-e411-8d02-90b11c0b17d6',cb_entryCreatedDate='2016/4/20 20:54:00';loadViewCount(cb_entryId);var cb_postType=2;var isMarkdown=false;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="https://www.cnblogs.com/lhrbest/articles/5414373.html#" onclick="return RefreshPage();">刷新页面</a><a href="https://www.cnblogs.com/lhrbest/articles/5414373.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"><a href="http://www.ucancode.com/index.htm" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-工控&#39;)">【推荐】超50万C++/C#源码: 大型实时仿真组态图形源码</a><br><a href="https://ke.qq.com/adActivity.html?name=xiangxueketang2" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-享学&#39;)">【培训】IT职业生涯指南，Java程序员薪资翻3倍的秘密</a><br><a href="https://group.cnblogs.com/topic/81220.html" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-咕泡&#39;)">【培训】架构师开发十年，就只剩下这套架构体系了</a><br><a href="https://gitee.com/enterprises?from=bky-2" target="_blank" onclick="ga(&#39;send&#39;, &#39;event&#39;, &#39;Link&#39;, &#39;click&#39;, &#39;T2-gitee&#39;)">【推荐】专业便捷的企业级代码托管服务 - Gitee 码云</a><br></div>
<div id="opt_under_post"></div>
<script async="async" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/gpt.js.下载"></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>
<script>
  googletag.cmd.push(function() {
        googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
        googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
  });
</script>
<div id="cnblogs_c1" class="c_ad_block">
    <div id="div-gpt-ad-1546353474406-0" style="height:250px; width:300px;" data-google-query-id="CLGh-fq67eECFUQvlgoduEQNbw"><div id="google_ads_iframe_/1090369/C1_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C1_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C1_0" width="300" height="250" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="1" data-load-complete="true" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/saved_resource.html"></iframe></div></div>
</div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>相关博文：</b><br>·  <a href="https://www.cnblogs.com/jacklikedogs/p/4749825.html" target="_blank" onclick="clickRecomItmem(4749825)">Linux HugePage特性</a><br>·  <a href="https://www.cnblogs.com/xiaotengyi/p/8118944.html" target="_blank" onclick="clickRecomItmem(8118944)">Linux HugePage 特性</a><br>·  <a href="https://www.cnblogs.com/feiyun8616/p/7942615.html" target="_blank" onclick="clickRecomItmem(7942615)">转 用好HugePage，告别Linux性能故障</a><br>·  <a href="https://www.cnblogs.com/jintianfree/p/3993893.html" target="_blank" onclick="clickRecomItmem(3993893)">linux hugepage</a><br>·  <a href="https://www.cnblogs.com/mthoutai/p/7119385.html" target="_blank" onclick="clickRecomItmem(7119385)">Linux配置hugepage</a><br></div></div>
<div id="cnblogs_c2" class="c_ad_block">
    <div id="div-gpt-ad-1539008685004-0" style="height:60px; width:468px;" data-google-query-id="CLKh-fq67eECFUQvlgoduEQNbw"><div id="google_ads_iframe_/1090369/C2_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/1090369/C2_0" title="3rd party ad content" name="google_ads_iframe_/1090369/C2_0" width="468" height="60" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" style="border: 0px; vertical-align: bottom;" data-google-container-id="2" data-load-complete="true" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/saved_resource(1).html"></iframe></div></div>
</div>
<div id="under_post_kb"><div class="itnews c_ad_block"><b>最新新闻</b>：<br> ·  <a href="https://news.cnblogs.com/n/624458/" target="_blank">AWS Q1 猛增 41%，营收 77 亿美元</a><br> ·  <a href="https://news.cnblogs.com/n/624457/" target="_blank">服务“一带一路”！历时5天 第44颗北斗卫星成功进入工作轨道</a><br> ·  <a href="https://news.cnblogs.com/n/624456/" target="_blank">深网|百度上线EasyDL商品检测专业版和语音识别自训练平台</a><br> ·  <a href="https://news.cnblogs.com/n/624455/" target="_blank">AR创企Magic Leap获得日本电信巨头2.8亿美元投资</a><br> ·  <a href="https://news.cnblogs.com/n/624454/" target="_blank">微信2018年知识产权保护成绩单：原创保护超3900万篇文章</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
 if(enablePostBottom()) {
    codeHighlight();
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverT2();
    deliverC1();
    deliverC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);  
}
</script>
</div>

    
	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><a style="text-decoration:none;" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=eRURCxscCg05CAhXGhYU"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/ico_mailme_02.png"></a> &nbsp;<img border="0" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/group.png" alt="DBA笔试面试讲解" title="DBA笔试面试讲解">&nbsp;<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=646634621&amp;site=qq&amp;menu=yes" style="white-space:normal;"><img align="absmiddle" border="0" src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/pa" alt="欢迎与我联系" title="欢迎与我联系"></a>
 
<a style="font-family: Courier New; color: #666667; white-space: normal; text-decoration: none;" href="https://weidian.com/?userid=793741433&amp;wfr=c&amp;ifr=shopdetail" target="_blank"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/8abd49367e441933.png" height="400" width="290" alt=""></a>
<a style="font-family: Courier New; color: #666667; white-space: normal; text-decoration: none;" href="https://lhr.ke.qq.com/" target="_blank"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/35a3856266a82d4c.png" height="400" width="290" alt=""></a>
<a style="font-family: Courier New; color: #666667; white-space: normal; text-decoration: none;" href="http://blog.itpub.net/26736162/viewspace-2148098/" target="_blank"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/1946a1ae556cd911.png" height="400" width="290" alt=""></a>
<a style="font-family: Courier New; color: #666667; white-space: normal; text-decoration: none;" href="http://blog.itpub.net/26736162/viewspace-2148098/" target="_blank"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/1f71f3d8a6b436f3.png" height="350" width="290" alt=""></a><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/lhrbest/">^_^小麦苗^_^</a><br>园龄：<a href="https://home.cnblogs.com/u/lhrbest/" title="入园时间：2014-07-01">4年9个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/lhrbest/followers/">105</a><br>关注：<a href="https://home.cnblogs.com/u/lhrbest/followees/">44</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;3e95319f-7700-e411-8d02-90b11c0b17d6&#39;)">+加关注</a></div><script>getFollowStatus('3e95319f-7700-e411-8d02-90b11c0b17d6')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/03/01&#39;);return false;">&lt;</a></td><td align="center">2019年4月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2019/05/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td align="center">2</td><td align="center">3</td><td align="center">4</td><td align="center">5</td><td class="CalWeekendDay" align="center">6</td></tr><tr><td class="CalWeekendDay" align="center">7</td><td align="center">8</td><td align="center">9</td><td align="center">10</td><td align="center">11</td><td align="center">12</td><td class="CalWeekendDay" align="center">13</td></tr><tr><td class="CalWeekendDay" align="center">14</td><td align="center">15</td><td align="center">16</td><td align="center">17</td><td align="center">18</td><td align="center">19</td><td class="CalWeekendDay" align="center">20</td></tr><tr><td class="CalWeekendDay" align="center">21</td><td align="center">22</td><td align="center">23</td><td align="center">24</td><td align="center">25</td><td class="CalTodayDay" align="center">26</td><td class="CalWeekendDay" align="center">27</td></tr><tr><td class="CalWeekendDay" align="center">28</td><td align="center">29</td><td align="center">30</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td><td class="CalOtherMonthDay" align="center">4</td></tr><tr><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td><td class="CalOtherMonthDay" align="center">9</td><td class="CalOtherMonthDay" align="center">10</td><td class="CalOtherMonthDay" align="center">11</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block">
<div id="sidebar_search" class="mySearch">
<h3 class="catListTitle">搜索</h3>
<div id="sidebar_search_box">
<div id="widget_my_zzk" class="div_my_zzk"><input type="text" id="q" onkeydown="return zzk_go_enter(event);" class="input_my_zzk">&nbsp;<input onclick="zzk_go()" type="button" value="找找看" id="btnZzk" class="btn_my_zzk"></div>
<div id="widget_my_google" class="div_my_zzk"><input type="text" name="google_q" id="google_q" onkeydown="return google_go_enter(event)" class="input_my_zzk">&nbsp;<input onclick="google_go()" type="button" value="谷歌搜索" class="btn_my_zzk"></div>
</div>
</div>

</div><div id="sidebar_shortcut" class="sidebar-block">
<div class="catListLink">
<h3 class="catListTitle">常用链接</h3>
<ul>
<li><a href="https://www.cnblogs.com/lhrbest/p/" title="我的博客的随笔列表">我的随笔</a></li><li><a href="https://www.cnblogs.com/lhrbest/MyComments.html" title="我发表过的评论列表">我的评论</a></li><li><a href="https://www.cnblogs.com/lhrbest/OtherPosts.html" title="我评论过的随笔列表">我的参与</a></li><li><a href="https://www.cnblogs.com/lhrbest/RecentComments.html" title="我的博客的评论列表">最新评论</a></li><li><a href="https://www.cnblogs.com/lhrbest/tag/" title="我的博客的标签列表">我的标签</a></li>
</ul>
<div id="itemListLin_con" style="display:none;">
<ul>

</ul>
</div>
</div></div><div id="sidebar_recentposts" class="sidebar-block">
<div class="catListEssay">
<h3 class="catListTitle">最新随笔</h3>
<ul>
<li><a href="https://www.cnblogs.com/lhrbest/p/10509785.html">1. Oracle 19c使用dbca来搭建物理DG</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10483302.html">2. Oracle 19C的下载和安装部署（图形安装和静默安装）</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10411927.html">3. 新书出版 |《数据库程序员面试笔试真题与解析》</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10411921.html">4. 新书出版 |《Oracle程序员面试笔试宝典》</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10318235.html">5. 《将博客搬至CSDN》</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10281563.html">6. 单下划线与双下划线的区别</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/9994759.html">7. Oracle_lhr_CentOS 7.3  ECS上搭建RAC 18c+单实例DG+EMCC+DG的FSFO快速故障转移配置</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/9435119.html">8. 【静默】Oracle各类响应文件何在？</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/9435112.html">9. 新书出版 |《数据库程序员面试笔试宝典》</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/9435116.html">10. 【静默】在RHEL 6.5上静默安装Oracle 18c</a></li>
</ul>
</div>
</div><div id="sidebar_toptags" class="sidebar-block"></div><div id="sidebar_categories">
<div id="sidebar_postcategory" class="catListPostCategory sidebar-block">
<h3 class="catListTitle">随笔分类<span style="font-size:11px;font-weight:normal">(75)</span></h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="https://www.cnblogs.com/lhrbest/category/802932.html">IT生活(4)</a> </li>

<li><a id="CatList_LinkList_0_Link_1" href="https://www.cnblogs.com/lhrbest/category/893938.html">MySQL(4)</a> </li>

<li><a id="CatList_LinkList_0_Link_2" href="https://www.cnblogs.com/lhrbest/category/893937.html">Oracle(66)</a> </li>

<li><a id="CatList_LinkList_0_Link_3" href="https://www.cnblogs.com/lhrbest/category/1389525.html">Python(1)</a> </li>

</ul>

</div>

<div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
<h3 class="catListTitle">随笔档案<span style="font-size:11px;font-weight:normal">(157)</span></h3>

<ul>

<li><a id="CatList_LinkList_1_Link_0" href="https://www.cnblogs.com/lhrbest/archive/2019/03.html">2019年3月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_1" href="https://www.cnblogs.com/lhrbest/archive/2019/02.html">2019年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_2" href="https://www.cnblogs.com/lhrbest/archive/2019/01.html">2019年1月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_3" href="https://www.cnblogs.com/lhrbest/archive/2018/11.html">2018年11月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_4" href="https://www.cnblogs.com/lhrbest/archive/2018/08.html">2018年8月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_5" href="https://www.cnblogs.com/lhrbest/archive/2018/07.html">2018年7月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_6" href="https://www.cnblogs.com/lhrbest/archive/2018/06.html">2018年6月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_7" href="https://www.cnblogs.com/lhrbest/archive/2018/05.html">2018年5月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_8" href="https://www.cnblogs.com/lhrbest/archive/2018/04.html">2018年4月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_9" href="https://www.cnblogs.com/lhrbest/archive/2018/03.html">2018年3月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_10" href="https://www.cnblogs.com/lhrbest/archive/2018/02.html">2018年2月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_11" href="https://www.cnblogs.com/lhrbest/archive/2018/01.html">2018年1月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_12" href="https://www.cnblogs.com/lhrbest/archive/2017/11.html">2017年11月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_13" href="https://www.cnblogs.com/lhrbest/archive/2017/09.html">2017年9月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_14" href="https://www.cnblogs.com/lhrbest/archive/2017/08.html">2017年8月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_15" href="https://www.cnblogs.com/lhrbest/archive/2017/07.html">2017年7月 (10)</a> </li>

<li><a id="CatList_LinkList_1_Link_16" href="https://www.cnblogs.com/lhrbest/archive/2017/06.html">2017年6月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_17" href="https://www.cnblogs.com/lhrbest/archive/2017/05.html">2017年5月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_18" href="https://www.cnblogs.com/lhrbest/archive/2017/04.html">2017年4月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_19" href="https://www.cnblogs.com/lhrbest/archive/2017/03.html">2017年3月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_20" href="https://www.cnblogs.com/lhrbest/archive/2017/02.html">2017年2月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_21" href="https://www.cnblogs.com/lhrbest/archive/2017/01.html">2017年1月 (6)</a> </li>

<li><a id="CatList_LinkList_1_Link_22" href="https://www.cnblogs.com/lhrbest/archive/2016/12.html">2016年12月 (8)</a> </li>

<li><a id="CatList_LinkList_1_Link_23" href="https://www.cnblogs.com/lhrbest/archive/2016/11.html">2016年11月 (10)</a> </li>

<li><a id="CatList_LinkList_1_Link_24" href="https://www.cnblogs.com/lhrbest/archive/2016/10.html">2016年10月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_25" href="https://www.cnblogs.com/lhrbest/archive/2016/09.html">2016年9月 (11)</a> </li>

<li><a id="CatList_LinkList_1_Link_26" href="https://www.cnblogs.com/lhrbest/archive/2016/08.html">2016年8月 (7)</a> </li>

<li><a id="CatList_LinkList_1_Link_27" href="https://www.cnblogs.com/lhrbest/archive/2016/06.html">2016年6月 (1)</a> </li>

<li><a id="CatList_LinkList_1_Link_28" href="https://www.cnblogs.com/lhrbest/archive/2016/04.html">2016年4月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_29" href="https://www.cnblogs.com/lhrbest/archive/2016/03.html">2016年3月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_30" href="https://www.cnblogs.com/lhrbest/archive/2016/02.html">2016年2月 (3)</a> </li>

<li><a id="CatList_LinkList_1_Link_31" href="https://www.cnblogs.com/lhrbest/archive/2016/01.html">2016年1月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_32" href="https://www.cnblogs.com/lhrbest/archive/2015/09.html">2015年9月 (4)</a> </li>

<li><a id="CatList_LinkList_1_Link_33" href="https://www.cnblogs.com/lhrbest/archive/2015/08.html">2015年8月 (2)</a> </li>

<li><a id="CatList_LinkList_1_Link_34" href="https://www.cnblogs.com/lhrbest/archive/2015/07.html">2015年7月 (13)</a> </li>

<li><a id="CatList_LinkList_1_Link_35" href="https://www.cnblogs.com/lhrbest/archive/2015/06.html">2015年6月 (12)</a> </li>

<li><a id="CatList_LinkList_1_Link_36" href="https://www.cnblogs.com/lhrbest/archive/2015/05.html">2015年5月 (10)</a> </li>

</ul>

</div>

<div id="sidebar_articlearchive" class="catListArticleArchive sidebar-block">
<h3 class="catListTitle">文章档案<span style="font-size:11px;font-weight:normal">(73)</span></h3>

<ul>

<li><a id="CatList_LinkList_2_Link_0" href="https://www.cnblogs.com/lhrbest/archives/2016/10.html" rel="nofollow">2016年10月 (1)</a> </li>

<li><a id="CatList_LinkList_2_Link_1" href="https://www.cnblogs.com/lhrbest/archives/2016/09.html" rel="nofollow">2016年9月 (7)</a> </li>

<li><a id="CatList_LinkList_2_Link_2" href="https://www.cnblogs.com/lhrbest/archives/2016/08.html" rel="nofollow">2016年8月 (8)</a> </li>

<li><a id="CatList_LinkList_2_Link_3" href="https://www.cnblogs.com/lhrbest/archives/2016/07.html" rel="nofollow">2016年7月 (6)</a> </li>

<li><a id="CatList_LinkList_2_Link_4" href="https://www.cnblogs.com/lhrbest/archives/2016/06.html" rel="nofollow">2016年6月 (5)</a> </li>

<li><a id="CatList_LinkList_2_Link_5" href="https://www.cnblogs.com/lhrbest/archives/2016/05.html" rel="nofollow">2016年5月 (4)</a> </li>

<li><a id="CatList_LinkList_2_Link_6" href="https://www.cnblogs.com/lhrbest/archives/2016/04.html" rel="nofollow">2016年4月 (30)</a> </li>

<li><a id="CatList_LinkList_2_Link_7" href="https://www.cnblogs.com/lhrbest/archives/2016/03.html" rel="nofollow">2016年3月 (5)</a> </li>

<li><a id="CatList_LinkList_2_Link_8" href="https://www.cnblogs.com/lhrbest/archives/2016/02.html" rel="nofollow">2016年2月 (4)</a> </li>

<li><a id="CatList_LinkList_2_Link_9" href="https://www.cnblogs.com/lhrbest/archives/2015/05.html" rel="nofollow">2015年5月 (3)</a> </li>

</ul>

</div>

<div id="sidebar_imagecategory" class="catListImageCategory sidebar-block">
<h3 class="catListTitle">相册<span style="font-size:11px;font-weight:normal">(3)</span></h3>

<ul>

<li><a id="CatList_LinkList_3_Link_0" href="https://www.cnblogs.com/lhrbest/gallery/1374918.html" rel="nofollow">《Oracle程序员面试笔试宝典》--红书皮(3)</a> </li>

</ul>

</div>

</div><div id="sidebar_scorerank" class="sidebar-block">
<div class="catListBlogRank">
<h3 class="catListTitle">积分与排名</h3>
<ul>
	<li class="liScore">
		积分 -	165905
	</li>
	<li class="liRank">
		排名 -	2311
	</li>
</ul>
</div>


</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6219687.html#4241443">1. Re:【故障处理】ORA-28040: No matching authentication protocol</a></li>
        <li class="recent_comment_body">有理有据，问题可复现，完美。</li>
        <li class="recent_comment_author">--Frank.Han</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/10483302.html#4241307">2. Re:Oracle 19C的下载和安装部署（图形安装和静默安装）</a></li>
        <li class="recent_comment_body">Oracle 19c（19.3）可以在OTN网站（）下载了，也可以去Oracle的云下载地址（）进行下载。本文是基于19.2版本的。...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/10483302.html#4241302">3. Re:Oracle 19C的下载和安装部署（图形安装和静默安装）</a></li>
        <li class="recent_comment_body">非常全面！多谢！伸手党的快乐！</li>
        <li class="recent_comment_author">--明天·你好</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/articles/5950987.html#4099472">4. Re:【sessions】Oracle中sessions和processes的大小关系（10g和11g不同）</a></li>
        <li class="recent_comment_body">多谢分享，好文要顶。</li>
        <li class="recent_comment_author">--5IGIS</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/8623532.html#3934471">5. Re:【RMAN】Oracle中如何备份控制文件？备份控制文件的方式有哪几种？</a></li>
        <li class="recent_comment_body">@潇湘隐者Oracle.Database.11g.RMAN备份与恢复...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/8623532.html#3934463">6. Re:【RMAN】Oracle中如何备份控制文件？备份控制文件的方式有哪几种？</a></li>
        <li class="recent_comment_body">李兄，文章中的图片来自哪本书籍？</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/8439345.html#3907242">7. Re:在高并发、高负载的情况下，如何给表添加字段并设置DEFAULT值？</a></li>
        <li class="recent_comment_body">fcrf支持支持</li>
        <li class="recent_comment_author">--牛腩</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7793934.html#3832444">8. Re:【DG】利用闪回数据库（flashback）修复Failover后的DG环境</a></li>
        <li class="recent_comment_body">真快，O(∩_∩)O哈哈~</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7793934.html#3832436">9. Re:【DG】利用闪回数据库（flashback）修复Failover后的DG环境</a></li>
        <li class="recent_comment_body">学习了！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7576416.html#3795408">10. Re:【BBED】BBED模拟并修复ORA-08102错误</a></li>
        <li class="recent_comment_body">@潇湘隐者多提点建议...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7576416.html#3795317">11. Re:【BBED】BBED模拟并修复ORA-08102错误</a></li>
        <li class="recent_comment_body">学习了！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7445468.html#3769486">12. Re:【MySQL】Linux下MySQL 5.5、5.6和5.7的RPM、二进制和源码安装</a></li>
        <li class="recent_comment_body">@潇湘隐者哈哈，开始玩咯...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7445468.html#3769478">13. Re:【MySQL】Linux下MySQL 5.5、5.6和5.7的RPM、二进制和源码安装</a></li>
        <li class="recent_comment_body">李兄也开始玩MySQL了啊</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6218042.html#3747515">14. Re:【故障处理】队列等待之enq IV - contention案例</a></li>
        <li class="recent_comment_body">@narcii11g啊，那你在MOS上再找找，不行就提SR吧。...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6218042.html#3747507">15. Re:【故障处理】队列等待之enq IV - contention案例</a></li>
        <li class="recent_comment_body">@^_^小麦苗^_^我的意思是说，enq: IV - contention这个等待事件到底是在等待什么。官方文档中队IV这种enqueue是只给了这样一个定义The Oracle enqueues .......</li>
        <li class="recent_comment_author">--narcii</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6218042.html#3747480">16. Re:【故障处理】队列等待之enq IV - contention案例</a></li>
        <li class="recent_comment_body">@narciiCluster nodes have different CPU count resulting in different number of LMD processes, on one......</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6218042.html#3747446">17. Re:【故障处理】队列等待之enq IV - contention案例</a></li>
        <li class="recent_comment_body">然而enq: IV -  contention到底是什么意思都没有说清楚</li>
        <li class="recent_comment_author">--narcii</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7239802.html#3745306">18. Re:【OS】NMON的简介和使用</a></li>
        <li class="recent_comment_body">@潇湘隐者我是直接摘抄的，孔大师可以整理一下，把有用的内容提炼出来。...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7239802.html#3745303">19. Re:【OS】NMON的简介和使用</a></li>
        <li class="recent_comment_body">泪奔啊，我几个月前准备写nmon，一直没有整理好，现在你已经写完了。我已经写无可写了！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7240770.html#3744366">20. Re:Oratop工具——实时数据库性能监控工具</a></li>
        <li class="recent_comment_body">@潇湘隐者哈哈...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7240770.html#3744306">21. Re:Oratop工具——实时数据库性能监控工具</a></li>
        <li class="recent_comment_body">学习了，还不知道有这么个工具！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6337508.html#3728582">22. Re:Oracle 12cR1 RAC 在VMware Workstation上安装(中)—图形界面安装</a></li>
        <li class="recent_comment_body">用2G内存的虚拟机组RAC，之前按照你的步骤都比较顺利，但在DBCA这一步建库的时候老是提示ORA-00838:memory_target is too small,needs to be at le......</li>
        <li class="recent_comment_author">--syyap</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7112896.html#3728382">23. Re:【OGG】OGG基础知识整理</a></li>
        <li class="recent_comment_body">@潇湘隐者网上抄，很快的，主要是方便自己查阅。...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7112896.html#3728379">24. Re:【OGG】OGG基础知识整理</a></li>
        <li class="recent_comment_body">写这样一篇要耗费多少精力啊！顶起</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7076782.html#3727610">25. Re:【RAC】RAC相关基础知识</a></li>
        <li class="recent_comment_body">到位的帖子</li>
        <li class="recent_comment_author">--manganese_zh</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7076782.html#3722395">26. Re:【RAC】RAC相关基础知识</a></li>
        <li class="recent_comment_body">@潇湘隐者哈哈，网上抄的...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/7076782.html#3722381">27. Re:【RAC】RAC相关基础知识</a></li>
        <li class="recent_comment_body">默默点赞！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/5987585.html#3633179">28. Re:海量IT资料 + 各种平台下的Oracle安装文件 + 公开课录像 + 各种视频教程资料</a></li>
        <li class="recent_comment_body">@dante.liu本文不需要pdf文件，其他文章可参考：...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6337496.html#3612511">29. Re:Oracle 12cR1 RAC 在VMware Workstation上安装(上)—OS环境配置</a></li>
        <li class="recent_comment_body">能画个拓扑图吧，太多IP了，有点搞不清了</li>
        <li class="recent_comment_author">--dante.liu</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6127710.html#3597604">30. Re:【密码】Oracle用户密码系列</a></li>
        <li class="recent_comment_body">大神</li>
        <li class="recent_comment_author">--dante.liu</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/5987585.html#3596965">31. Re:海量IT资料 + 各种平台下的Oracle安装文件 + 公开课录像 + 各种视频教程资料</a></li>
        <li class="recent_comment_body">PDF文件在哪下呢？</li>
        <li class="recent_comment_author">--dante.liu</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/4564013.html#3570604">32. Re:【OGG】OGG的下载和安装篇</a></li>
        <li class="recent_comment_body">请问环境变量可以在oracle用户的.bash_profile中配置吗？</li>
        <li class="recent_comment_author">--雷厉*风行</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6083478.html#3561560">33. Re:【函数】Oracle函数系列（2）--数学函数及日期函数</a></li>
        <li class="recent_comment_body">@汉卿有pdf版本的...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6083478.html#3561304">34. Re:【函数】Oracle函数系列（2）--数学函数及日期函数</a></li>
        <li class="recent_comment_body">直接共享下你的word文档好了</li>
        <li class="recent_comment_author">--汉卿</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6058227.html#3555855">35. Re:【SQL查询】集合查询之INTERSECT</a></li>
        <li class="recent_comment_body">学习了</li>
        <li class="recent_comment_author">--咸菜01</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6005702.html#3555775">36. Re:【锁】Oracle死锁（DeadLock）的分类及其模拟</a></li>
        <li class="recent_comment_body">@潇湘隐者O(∩_∩)O哈哈~ 我也从你的博客中学到了很多...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6005702.html#3555133">37. Re:【锁】Oracle死锁（DeadLock）的分类及其模拟</a></li>
        <li class="recent_comment_body">今天仔细拜读了一下，写的真不错！顶起！</li>
        <li class="recent_comment_author">--潇湘隐者</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6013675.html#3549601">38. Re:【体系结构】Oracle参数介绍</a></li>
        <li class="recent_comment_body">很全面，学习了</li>
        <li class="recent_comment_author">--Yumiko_Sunny</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/5988552.html#3546280">39. Re:【函数】Oracle函数系列（1）--字符函数</a></li>
        <li class="recent_comment_body">纠错:  文章中关于replace函数，如果第三个参数省略，那么默认为空值，文中打成空格了，不好意思</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
        <li class="recent_comment_title"><a href="https://www.cnblogs.com/lhrbest/p/6013675.html#3544760">40. Re:【体系结构】Oracle参数介绍</a></li>
        <li class="recent_comment_body">@潇湘隐者哈哈，回去根据你的文章加上推导参数，多谢多谢...</li>
        <li class="recent_comment_author">--^_^小麦苗^_^</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="https://www.cnblogs.com/lhrbest/p/6219687.html">1. 【故障处理】ORA-28040: No matching authentication protocol(19859)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7112896.html">2. 【OGG】OGG基础知识整理(11454)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4508832.html">3. 【数据泵】EXPDP导出表结构(5688)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5866284.html">4. 【云和恩墨】性能优化：Linux环境下合理配置大内存页(HugePage)(5153)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6337496.html">5. Oracle 12cR1 RAC 在VMware Workstation上安装(上)—OS环境配置(3834)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5161361.html">6. 【故障解决】OGG-00446 错误解决(3536)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6560906.html">7. 【方法】Oracle用户密码含特殊字符时的登陆问题(3299)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6689800.html">8. 如何更改图片的背景色（PS、证件照之星）(3109)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5738544.html">9. 【故障处理】分布式事务ORA-01591错误解决(2790)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6048307.html">10. 【故障处理】IMP-00010错误 12C的dmp文件导入11G(2781)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7445468.html">11. 【MySQL】Linux下MySQL 5.5、5.6和5.7的RPM、二进制和源码安装(2323)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6645603.html">12. 【优化】COUNT(1)、COUNT(*)、COUNT(常量)、COUNT(主键)、COUNT(ROWID)、COUNT(非空列)、COUNT(允许为空列)、COUNT(DISTINCT 列名)(2318)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4546646.html">13. 【RAC】rac环境下的数据库备份与还原(2271)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6005702.html">14. 【锁】Oracle死锁（DeadLock）的分类及其模拟(2229)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4680273.html">15. 【DATAGUARD】物理dg的failover切换(六)(2222)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6020872.html">16. 【等待事件】序列等待事件总结（enq: SQ - contention、row cache lock、DFS lock handle和enq: SV - contention）(2162)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6832707.html">17. 【exp/imp】将US7ASCII字符集的dmp文件导入到ZHS16GBK字符集的数据库中(2157)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4564013.html">18. 【OGG】OGG的下载和安装篇(2156)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6493218.html">19. PLSQL Developer软件使用大全(2099)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5874508.html">20. 【DBAplus】SQL优化：一篇文章说清楚Oracle Hint的正确使用姿势(2002)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4760989.html">21. 我的oracle 健康检查报告(1889)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6013675.html">22. 【体系结构】Oracle参数介绍(1719)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6575975.html">23. 【方法】如何限定IP访问Oracle数据库(1708)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6345157.html">24. 使用OpenFiler来模拟存储配置RAC中ASM共享盘及多路径（multipath）的测试(1704)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6559092.html">25. 【故障•监听】TNS-12518、TNS-00517和 Linux Error：32：Broken pipe(1668)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5388389.html">26. 密码过期导致的用户锁定问题(1668)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6337516.html">27. Oracle 12cR1 RAC 在VMware Workstation上安装(下)—静默安装(1632)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4576358.html">28. 【OGG】RAC环境下配置OGG单向同步 (四)(1486)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6337508.html">29. Oracle 12cR1 RAC 在VMware Workstation上安装(中)—图形界面安装(1464)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5924743.html">30. 【知识点整理】Oracle中NOLOGGING、APPEND、ARCHIVE和PARALLEL下，REDO、UNDO和执行速度的比较(1390)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5987585.html">31. 海量IT资料 + 各种平台下的Oracle安装文件 + 公开课录像 + 各种视频教程资料(1366)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5158778.html">32. 【故障解决】ORA-06502错误解决(1279)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5859095.html">33. 【故障处理】队列等待之TX - allocate ITL entry引起的死锁处理(1258)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5914076.html">34. 【方法整理】Oracle 获取trace跟踪文件名的几种常用方式(1241)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4569822.html">35. 【OGG】OGG的单向DML复制配置(一)(1200)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6040312.html">36. 【故障处理】ORA-30012的解决过程(1182)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6218042.html">37. 【故障处理】队列等待之enq IV - contention案例(1162)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4754289.html">38. 【DATAGUARD】物理dg在主库丢失归档文件的情况下的恢复(七)(1160)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6511242.html">39. 数据库笔试面试题库（Oracle、MySQL等）(1144)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4569864.html">40. 【OGG】OGG的单向复制配置-支持DDL(二)(1131)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="https://www.cnblogs.com/lhrbest/p/6218042.html">1. 【故障处理】队列等待之enq IV - contention案例(4)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5987585.html">2. 海量IT资料 + 各种平台下的Oracle安装文件 + 公开课录像 + 各种视频教程资料(4)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6013675.html">3. 【体系结构】Oracle参数介绍(3)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7076782.html">4. 【RAC】RAC相关基础知识(3)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7576416.html">5. 【BBED】BBED模拟并修复ORA-08102错误(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7445468.html">6. 【MySQL】Linux下MySQL 5.5、5.6和5.7的RPM、二进制和源码安装(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7240770.html">7. Oratop工具——实时数据库性能监控工具(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7239802.html">8. 【OS】NMON的简介和使用(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7112896.html">9. 【OGG】OGG基础知识整理(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6005702.html">10. 【锁】Oracle死锁（DeadLock）的分类及其模拟(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6083478.html">11. 【函数】Oracle函数系列（2）--数学函数及日期函数(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7793934.html">12. 【DG】利用闪回数据库（flashback）修复Failover后的DG环境(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5954516.html">13. Oracle恢复流程图(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5869463.html">14. 【函数】wm_concat包的订制(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/10483302.html">15. Oracle 19C的下载和安装部署（图形安装和静默安装）(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/8623532.html">16. 【RMAN】Oracle中如何备份控制文件？备份控制文件的方式有哪几种？(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/8439345.html">17. 在高并发、高负载的情况下，如何给表添加字段并设置DEFAULT值？(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6058227.html">18. 【SQL查询】集合查询之INTERSECT(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5988552.html">19. 【函数】Oracle函数系列（1）--字符函数(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6127710.html">20. 【密码】Oracle用户密码系列(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4564013.html">21. 【OGG】OGG的下载和安装篇(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5240338.html">22. 【OEM】OEM安装维护(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6337508.html">23. Oracle 12cR1 RAC 在VMware Workstation上安装(中)—图形界面安装(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6337496.html">24. Oracle 12cR1 RAC 在VMware Workstation上安装(上)—OS环境配置(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6219687.html">25. 【故障处理】ORA-28040: No matching authentication protocol(1)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="https://www.cnblogs.com/lhrbest/p/6013675.html">1. 【体系结构】Oracle参数介绍(4)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7074044.html">2. 【DG】[三思笔记]一步一步学DataGuard(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6645603.html">3. 【优化】COUNT(1)、COUNT(*)、COUNT(常量)、COUNT(主键)、COUNT(ROWID)、COUNT(非空列)、COUNT(允许为空列)、COUNT(DISTINCT 列名)(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5987585.html">4. 海量IT资料 + 各种平台下的Oracle安装文件 + 公开课录像 + 各种视频教程资料(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4514252.html">5. 【书评:Oracle查询优化改写】第四章(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7239802.html">6. 【OS】NMON的简介和使用(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7207739.html">7. 【DG】Oracle_Data_Guard官方直译(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7112896.html">8. 【OGG】OGG基础知识整理(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6560906.html">9. 【方法】Oracle用户密码含特殊字符时的登陆问题(2)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6219687.html">10. 【故障处理】ORA-28040: No matching authentication protocol(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6127710.html">11. 【密码】Oracle用户密码系列(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6091277.html">12. 【锁】Oracle锁系列(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6048307.html">13. 【故障处理】IMP-00010错误 12C的dmp文件导入11G(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6040312.html">14. 【故障处理】ORA-30012的解决过程(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7076782.html">15. 【RAC】RAC相关基础知识(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4680262.html">16. 【DATAGUARD】物理dg的switchover切换（五）(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4569822.html">17. 【OGG】OGG的单向DML复制配置(一)(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4554489.html">18. oracle中如何判断一个字符串是否含有汉字(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5954516.html">19. Oracle恢复流程图(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5914076.html">20. 【方法整理】Oracle 获取trace跟踪文件名的几种常用方式(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/5738544.html">21. 【故障处理】分布式事务ORA-01591错误解决(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/4754289.html">22. 【DATAGUARD】物理dg在主库丢失归档文件的情况下的恢复(七)(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/9253449.html">23. Oracle集群（RAC）时间同步（ntp和CTSS）(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/8623532.html">24. 【RMAN】Oracle中如何备份控制文件？备份控制文件的方式有哪几种？(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/8439345.html">25. 在高并发、高负载的情况下，如何给表添加字段并设置DEFAULT值？(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7793934.html">26. 【DG】利用闪回数据库（flashback）修复Failover后的DG环境(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7576416.html">27. 【BBED】BBED模拟并修复ORA-08102错误(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/7240770.html">28. Oratop工具——实时数据库性能监控工具(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6575975.html">29. 【方法】如何限定IP访问Oracle数据库(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6005702.html">30. 【锁】Oracle死锁（DeadLock）的分类及其模拟(1)</a></li><li><a href="https://www.cnblogs.com/lhrbest/p/6511242.html">31. 数据库笔试面试题库（Oracle、MySQL等）(1)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2019 ^_^小麦苗^_^
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->

<!--PageEndHtml Block Begin-->
<a style="text-decoration: none" target="_blank" href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=eRURCxscCg05CAhXGhYU"><img src="./用好HugePage，告别Linux性能故障 - ^_^小麦苗^_^ - 博客园_files/ico_mailme_02.png"></a>
<!--PageEndHtml Block End-->


</body></html>